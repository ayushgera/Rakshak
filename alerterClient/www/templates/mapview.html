<!-- List of Nearby Incidents -->
<ion-view view-title="mapview">
  <ion-content>
    <!-- Map -->
    <div class="alert-wrapper">
        <div class="search-bar">
          <div class="bar bar-header item-input-inset">
            <label class="item-input-wrapper">
              <i class="icon ion-ios-search placeholder-icon"></i>
              <input type="search" placeholder="Search">
            </label>
            <div class="search-cancel">
            <i class="ion-close-circled"></i>
            </div>
          </div>
        </div>
        <!-- Google Map -->
        <div class="map-container">
        <ui-gmap-google-map events="map.events" center='map.center' zoom='map.zoom' draggable="true" options="map.options">
            <ui-gmap-markers models="markerModel" fit="true" coords="'self'" icon="'icon'">
            </ui-gmap-markers>
        </ui-gmap-google-map>
        </div>
        <div ng-hide="data.foundResponders.length>0" class="alert-button">
          <button class="button button-block button-positive" ng-click="alertServer()">
             ALERT
          </button>
        </div>
        <div ng-show="alertSent && data.foundResponders.length===0" >
          <div class="card">
             <div class="item item-avatar">
                <img src="img/ambulanceIcon.png">
                <h3>No responders found yet! :(</h3>
             </div>
          </div>
        </div>
        <div ng-show="alertSent && data.foundResponders.length>0" class="alerts-list">
          <div class="card">
             <div class="item item-avatar item-text-wrap" ng-repeat="responderCard in responderCards">
                <img src="img/ambulanceIcon.png">
                <h2>{{responderCard.title}}</h2>
                <h2 ng-bing="responderCard.distance">{{responderCard.distance}}</h2>
                <p ng-bing="responderCard.text">{{responderCard.text}}</p>
                <span ng-show="responderCard.responderId===data.responded.responder.responderId">
                  <span>
                    <i class="icon ion-checkmark-circled"></i>
                    <p>Responded</p>
                    <button class="button button-positive" ng-click="changeView('responder')">
                       Track
                    </button>
                  </span>
                </span>
                <button class="button button-positive" ng-click='talkToResponder(responderCard.alerterId)'>Talk to responder</button>
             </div>
          </div>
        </div>
  </ion-content>
</ion-view>
